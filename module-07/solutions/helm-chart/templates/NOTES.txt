Database Operator has been installed!

CHART: {{ .Chart.Name }}-{{ .Chart.Version }}
NAMESPACE: {{ include "database-operator.namespace" . }}

To verify the installation:

  kubectl get pods -n {{ include "database-operator.namespace" . }} -l control-plane=controller-manager

To check the operator logs:

  kubectl logs -n {{ include "database-operator.namespace" . }} -l control-plane=controller-manager -f

{{- if .Values.crds.install }}

CRDs installed:
  - databases.database.example.com

To create a Database:

  cat <<EOF | kubectl apply -f -
  apiVersion: database.example.com/v1
  kind: Database
  metadata:
    name: my-database
  spec:
    image: postgres:14
    replicas: 1
    databaseName: mydb
    username: admin
    storage:
      size: 10Gi
  EOF

{{- end }}

{{- if .Values.webhook.enabled }}

Webhooks are enabled:
  - ValidatingWebhookConfiguration: {{ include "database-operator.fullname" . }}-validating-webhook
  - MutatingWebhookConfiguration: {{ include "database-operator.fullname" . }}-mutating-webhook

{{- if .Values.webhook.certManager.enabled }}
Certificates are managed by cert-manager.
{{- else }}
WARNING: cert-manager is not enabled. You must manually manage webhook certificates.
{{- end }}
{{- end }}

{{- if and (gt (int .Values.replicaCount) 1) (not .Values.leaderElection.enabled) }}

WARNING: You have {{ .Values.replicaCount }} replicas but leader election is disabled!
         Enable leader election to avoid conflicts:
         
         helm upgrade {{ .Release.Name }} {{ .Chart.Name }} --set leaderElection.enabled=true
{{- end }}

For more information, visit: {{ .Chart.Home }}

